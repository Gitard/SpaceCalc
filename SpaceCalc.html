<!DOCTYPE html>
<html>
<head>
<title>SpaceCalc</title>
<meta charset="utf-8">
<style>
* {
	margin: 0;
	padding: 0;
}
html, body {
	width:100%;
	height:100%;
	overflow: hidden;
}
.modalwin {
	width: 400px;
	height: 400px;
	top: 10%;
	right: 0;
	left: 0;
	margin: 0 auto;
	z-index: 2;
	display: none;
	position: fixed;
	padding: 15px;
}
</style>
</head>
<body>
<canvas id="canvas">Попробуй открыть в Браузере.</canvas>
<script>
var context = document.getElementById('canvas').getContext('2d');
var Lat=55.7667, Long=37.6667; // Москвабад.
var az=180, yz=0, dh=0.95, zoom=1, jd=JD(), E=ec();
var conlines=1, gridlines=1, connames=1, starnames=0, ref=1, vmod=2;
var planets=1, planetnames=1;
var star=[], planet=[], clinX, clinY, clinH, knot=[];
var k=Math.PI/180;

// База созвездий на эпоху J2000.
// Тип, обозначение, название, прямое восхождение, склонение, зв. величина, цвет, код линии.
var starsBase = [
0, "UMi", "Малая Медведица", 131816, 802242, 0, 0, 0,
1, "α", "Полярная", 23149, 891551, 1.97, "F", 1,
1, "δ", "Иелдан", 173213, 863511, 4.36, "A", 2,
1, "ε", "", 164558, 820214, 4.23, "G", 2,
1, "ζ", "", 154404, 774740, 4.32, "A", 3,
1, "η", "", 161730, 754519, 4.95, "F", 2,
1, "γ", "Феркад", 152044, 715002, 3.05, "A", 2,
1, "β", "Кохаб", 145042, 740920, 2.08, "K", 9,

0, "UMa", "Большая Медведица", 104655, 504035, 0, 0, 0,
1, "α", "Дубхе", 110344, 614503, 1.79, "K", 1,
1, "δ", "Мекгрец", 121526, 570157, 3.31, "A", 3,
1, "ε", "Алиот", 125402, 555735, 1.77, "A", 2,
1, "ζ", "Мицар", 132356, 545531, 2.27, "A", 2,
1, "80", "Алькор", 132514, 545917, 4.01, "A", 0,
1, "η", "Бенетнаш", 134732, 491848, 1.86, "B", 7,
1, "γ", "Фекда", 115350, 534141, 2.44, "A", 6,
1, "β", "Мерак", 110151, 562257, 2.37, "A", 5,
1, "χ", "", 114603, 474646, 3.71, "K", 2,
1, "ψ", "", 110940, 442955, 3.01, "K", 6,
1, "μ", "Таниа Аустралис", 102220, 412958, 3.05, "M", 7,
1, "λ", "Таниа Бореалис", 101706, 425452, 3.45, "A", 7,
1, "θ", "Аль Хауд", 93251, 514038, 3.17, "F", 6,
1, "κ", "Талита Аустралис", 90338, 470924, 3.6, "A", 7,
1, "ι", "Талита Бореалис", 85912, 480230, 3.14, "A", 7,
1, "φ", "", 95206, 540352, 4.59, "A", 2,
1, "υ", "", 95059, 590219, 3.8, "F", 2,
1, "23", "", 93132, 630343, 3.67, "F", 2,
1, "ο", "Мускида", 83016, 604305, 3.36, "G", 2,
1, "DK", "", 93429, 694949, 4.56, "G", 5,
1, "ν", "Алула Бореалис", 111829, 330539, 3.48, "K", 0,

0, "Cyg", "Лебедь", 210650, 500000, 0, 0, 0,
1, "α", "Денеб", 204126, 451649, 1.27, "A", 1,
1, "γ", "Садр", 202214, 401524, 2.2, "F", 3,
1, "δ", "", 194459, 450751, 2.87, "B", 2,
1, "θ", "", 193627, 501316, 4.48, "F", 2,
1, "ι2", "", 192942, 514347, 3.79, "A", 2,
1, "κ", "", 191706, 532207, 3.77, "G", 7,
1, "ε", "Гиенах Лебедя", 204613, 335813, 2.46, "K", 2,
1, "ζ", "", 211256, 301337, 3.2, "G", 7,
1, "η", "", 195618, 350500, 3.89, "K", 2,
1, "β", "Альдиберо", 193043, 275735, 3.08, "K", 2,
1, "τ", "", 211448, 380244, 3.72, "F", 0,

0, "Cas", "Кассиопея", 15700, 685000, 0, 0, 0,
1, "ε", "Сегин", 15424, 634012, 3.38, "B", 1,
1, "δ", "Рубах", 12549, 601407, 2.68, "A", 2,
1, "γ", "Цих", 5643, 604300, 2.47, "B", 2,
1, "α", "Шедир", 4031, 563214, 2.23, "K", 2,
1, "β", "Каф", 911, 590859, 2.27, "F", 2,
1, "η", "Ахид", 4906, 574857, 3.44, "F", 0,
1, "ζ", "", 3658, 535349, 3.66, "B", 0,

0, "And", "Андромеда", 10850, 445600, 0, 0, 0,
1, "α", "Альферац", 823, 290526, 2.06, "B", 1,
1, "δ", "", 3920, 305139, 3.27, "K", 2,
1, "β", "Мирак", 10944, 353714, 2.06, "M", 3,
1, "μ", "", 5645, 382958, 3.87, "A", 2,
1, "ν", "", 4949, 410444, 4.53, "B", 7,
1, "γ1", "Альмаак", 20354, 421947, 2.26, "K", 2,
1, "51", "", 13800, 483742, 3.57, "K", 4,
1, "λ", "", 233734, 462729, 3.82, "G", 0,
1, "ο", "", 230155, 421934, 3.62, "B", 0,

0, "Peg", "Пегас", 224130, 162820, 0, 0, 0,
1, "β", "Шеат", 230347, 280458, 2.46, "M", 3,
1, "η", "Матар", 224300, 301317, 2.94, "G", 7,
1, "μ", "Садал Бари", 225000, 243606, 3.48, "G", 2,
1, "λ", "", 224632, 233356, 3.95, "G", 7,
1, "α", "Маркаб", 230446, 151219, 2.49, "B", 6,
1, "γ", "Альгениб", 1314, 151101, 2.83, "B", 5,
1, "ξ", "", 224642, 121022, 4.19, "F", 2,
1, "ζ", "Хомам", 224128, 104953, 3.4, "B", 2,
1, "θ", "Бахам", 221012, 61152, 3.53, "A", 2,
1, "ε", "Эниф", 214411, 95230, 2.39, "K", 2,
1, "ι", "", 220701, 252042, 4.76, "F", 0,

0, "LMi", "Малый Лев", 104000, 324500, 0, 0, 0,
1, "46", "Преципуя", 105319, 341254, 3.83, "K", 1,
1, "β", "", 102753, 364226, 4.21, "G", 2,
1, "21", "", 100726, 351441, 4.48, "A", 2,
1, "SU", "", 93413, 362351, 4.55, "G", 2,

0, "Lyn", "Рысь", 82500, 410000, 0, 0, 0,
1, "α", "", 92103, 342333, 3.13, "K", 1,
1, "38", "", 91851, 364809, 3.82, "A", 2,
1, "HR 3612", "", 90632, 382708, 4.56, "G", 2,
1, "HR 3579", "", 90038, 414658, 3.97, "F", 2,
1, "31", "Альсциаукат", 82250, 431117, 4.25, "K", 2,
1, "21", "", 72643, 491241, 4.64, "A", 2,
1, "15", "", 65717, 582521, 4.35, "G", 2,
1, "UZ", "", 61937, 590039, 4.48, "A", 2,

0, "Aur", "Возничий", 63300, 401200, 0, 0, 0,
1, "ε", "Аль Анз", 50158, 434924, 2.99, "F", 1,
1, "α", "Капелла", 51641, 450032, 0.08, "G", 2,
1, "β", "Менкалинан", 55932, 445641, 1.9, "A", 2,
1, "θ", "", 55943, 371245, 2.62, "A", 7,
1, "η", "Хоедус II", 50631, 411404, 3.17, "B", 7,
1, "ζ", "Хаеди", 50229, 410433, 3.75, "K", 0,
1, "ι", "Хассалех", 45700, 330958, 2.69, "K", 2,
1, "δ", "", 55932, 541705, 3.72, "K", 0,

0, "Per", "Персей", 41000, 445900, 0, 0, 0,
1, "α", "Мирфак", 32419, 495140, 1.79, "F", 1,
1, "γ", "", 30448, 533023, 2.93, "G", 2,
1, "η", "Мирам", 25042, 555344, 3.76, "K", 7,
1, "κ", "", 30930, 445126, 3.8, "K", 0,
1, "β", "Алголь", 30810, 405720, 2.12, "B", 2,
1, "ρ", "Горгонея Тертия", 30511, 385025, 3.39, "M", 7,
1, "δ", "", 34256, 474715, 3.01, "B", 2,
1, "ν", "", 34512, 423443, 3.77, "F", 2,
1, "ε", "", 35751, 400037, 2.89, "B", 2,
1, "ξ", "Менкиб", 35858, 354728, 4.04, "O", 2,
1, "ζ", "", 35408, 315301, 2.85, "B", 2,
1, "ο", "Атик", 34419, 321718, 3.83, "B", 2,

0, "Tri", "Треугольник", 20500, 323100, 0, 0, 0,
1, "β", "", 20933, 345914, 3, "A", 1,
1, "α", "Металлах", 15305, 293444, 3.41, "F", 2,
1, "γ", "", 21719, 335050, 4.01, "A", 9,

0, "Cam", "Жираф", 51500, 740200, 0, 0, 0,
1, "HR 2209", "", 61851, 691911, 4.8, "A", 1,
1, "α", "", 45403, 662034, 4.29, "O", 2,
1, "β", "", 50325, 602632, 4.03, "G", 2,
1, "7", "", 45717, 534508, 4.47, "A", 7,
1, "γ", "", 35022, 711956, 4.63, "A", 2,
1, "BE", "", 34931, 653134, 4.47, "M", 2,
1, "HR 1035", "", 32904, 595625, 4.21, "B", 7,
1, "HR 2527", "", 70004, 765839, 4.55, "K", 2,
1, "HR 4084", "", 103105, 823331, 5.26, "F", 2,

0, "Cep", "Цефей", 221900, 712300, 0, 0, 0,
1, "ι", "", 224941, 661202, 3.52, "K", 1,
1, "β", "Албфирк", 212840, 703339, 3.23, "B", 3,
1, "γ", "Альраи", 233921, 773757, 3.21, "K", 5,
1, "α", "Альдерамин", 211835, 623508, 2.44, "A", 6,
1, "η", "", 204517, 615020, 3.43, "K", 2,
1, "θ", "", 202935, 625939, 4.22, "A", 7,
1, "ζ", "", 221051, 581204, 3.35, "K", 5,
1, "δ", "", 222910, 582455, 3.75, "F", 0,

0, "Dra", "Дракон", 185700, 611500, 0, 0, 0,
1, "ξ", "Грумиум", 175332, 565222, 3.75, "K", 1,
1, "γ", "Этамин", 175636, 512920, 2.23, "K", 2,
1, "β", "Растабан", 173026, 521805, 2.79, "G", 2,
1, "ν", "Кума", 173216, 551023, 4.87, "A", 9,
1, "δ", "Нодис Секундус", 191233, 673942, 3.07, "G", 2,
1, "ε", "Тил", 194810, 701604, 3.83, "G", 2,
1, "τ", "", 191533, 732120, 4.45, "K", 2,
1, "χ", "", 182103, 724358, 3.57, "F", 2,
1, "ζ", "Альдхибах", 170847, 654253, 3.17, "B", 2,
1, "η", "", 162400, 613051, 2.74, "G", 2,
1, "θ", "", 160153, 583355, 4.01, "F", 2,
1, "ι", "Ед Асик", 152456, 585758, 3.29, "K", 2,
1, "α", "Тубан", 140423, 642233, 3.65, "A", 2,
1, "κ", "", 123329, 694718, 3.87, "B", 2,
1, "λ", "Гианфар", 113124, 691952, 3.84, "M", 0,

0, "CVn", "Гончие Псы", 131700, 403000, 0, 0, 0,
1, "α", "Кор Кароли", 125602, 381906, 2.9, "A", 1,
1, "β", "Чара", 123345, 412127, 4.26, "G", 2,

0, "Com", "Волосы Вероники", 124200, 215000, 0, 0, 0,
1, "α", "Диадем", 130959, 173146, 5.22, "F", 1,
1, "β", "", 131152, 275241, 4.26, "F", 2,
1, "γ", "", 122656, 281606, 4.36, "K", 2,

0, "Boo", "Волопас", 151100, 444300, 0, 0, 0,
1, "α", "Арктур", 141540, 191057, -0.04, "K", 1,
1, "η", "Мурфид", 135441, 182352, 2.68, "G", 0,
1, "ε", "Изар", 144459, 270427, 2.7, "K", 2,
1, "δ", "", 151530, 331853, 3.47, "G", 2,
1, "β", "Неккар", 150157, 402326, 3.5, "G", 2,
1, "γ", "Сегинус", 143205, 381830, 3.03, "A", 2,
1, "ρ", "", 143150, 302217, 3.58, "K", 9,

0, "CrB", "Северная Корона", 155300, 343500, 0, 0, 0,
1, "θ", "", 153256, 312133, 4.14, "B", 1,
1, "β", "Нусаках", 152750, 290621, 3.68, "F", 2,
1, "α", "Альфесса", 153441, 264253, 2.23, "A", 2,
1, "γ", "", 154245, 261744, 3.84, "B", 2,
1, "δ", "", 154936, 260406, 4.63, "G", 2,
1, "ε", "", 155735, 265240, 4.15, "K", 2,
1, "ι", "", 160127, 295104, 4.99, "A", 2,

0, "Her", "Геркулес", 172100, 323200, 0, 0, 0,
1, "ε", "", 170017, 305535, 3.92, "A", 1,
1, "δ", "Сарин", 171502, 245021, 3.14, "A", 2,
1, "λ", "Маасим", 173044, 260638, 4.41, "K", 2,
1, "μ", "", 174628, 274314, 3.42, "G", 2,
1, "ξ", "", 175746, 291452, 3.7, "G", 7,
1, "ο", "", 180733, 284545, 3.83, "B", 0,
1, "109", "", 182342, 214611, 3.84, "K", 0,
1, "π", "", 171503, 364833, 3.16, "K", 3,
1, "ρ", "", 172341, 370845, 4.52, "B", 2,
1, "θ", "", 175615, 371502, 3.86, "K", 7,
1, "ι", "", 173928, 460023, 3.8, "B", 0,
1, "η", "", 164254, 385520, 3.53, "G", 6,
1, "σ", "", 163406, 422613, 4.2, "B", 2,
1, "τ", "", 161944, 461848, 3.89, "B", 2,
1, "φ", "", 160846, 445606, 4.26, "B", 2,
1, "υ", "", 160248, 460212, 4.76, "B", 7,
1, "ζ", "", 164117, 313611, 2.81, "G", 10,
1, "β", "Корнефорос", 163013, 212923, 2.77, "G", 3,
1, "γ", "", 162155, 190715, 3.75, "A", 7,
1, "α1", "Рас Альгети", 171439, 142325, 3.48, "M", 2,

0, "Lyr", "Лира", 185000, 424600, 0, 0, 0,
1, "ζ", "", 184446,373618, 4.36, "A", 1,
1, "β", "Шелиак", 185005, 332146, 3.45, "B", 2,
1, "γ", "Сулафат", 185857, 324122, 3.24, "B", 2,
1, "δ2", "", 185430, 365356, 4.3, "M", 9,
1, "α", "Вега", 183656, 384701, 0.03, "A", 2,

0, "Vul", "Лисичка", 202700, 250200, 0, 0, 0,
1, "23", "", 201546, 274851, 4.52, "K", 1,
1, "NT", "", 200106, 274513, 4.64, "A", 2,
1, "13", "", 195327, 240447, 4.58, "B", 2,
1, "α", "Ансер", 192842, 243954, 4.44, "M", 2,
1, "1", "", 191613, 212325, 4.77, "B", 2,

0, "Lac", "Ящерица", 223900, 395300, 0, 0, 0,
1, "β", "", 222333, 521345, 4.43, "G", 1,
1, "α", "", 223118, 501657, 3.77, "A", 2,
1, "4", "", 222431, 492835, 4.57, "B", 2,
1, "5", "", 222932, 474225, 4.36, "M", 2,
1, "2", "", 222102, 463212, 4.57, "B", 2,
1, "6", "", 223029, 430724, 4.51, "B", 2,
1, "HR 8485", "", 221353, 394254, 4.49, "K", 2,
1, "1", "", 221558, 374456, 4.13, "K", 2,

0, "Sge", "Стрела", 192600, 175300, 0, 0, 0,
1, "δ", "", 194723, 183203, 3.82, "M", 1,
1, "α", "Шам", 194006, 180050, 4.37, "G", 7,
1, "β", "", 194103, 172834, 4.37, "G", 7,
1, "γ", "", 195845, 192932, 3.47, "Μ", 2,

0, "Del", "Дельфин", 205018, 183207, 0, 0, 0,
1, "β", "Ротанев", 203733, 143543, 3.63, "F", 1,
1, "α", "Суалокин", 203938, 155443, 3.77, "B", 2,
1, "γ", "", 204640, 160727, 4.27, "K", 2,
1, "δ", "", 204328, 150428, 4.43, "A", 9,
1, "η", "", 203357, 130138, 5.38, "A", 2,
1, "ε", "Денеб дулфим", 203313, 111812, 4.03, "B", 2,

0, "Equ", "Малый Конь", 212000, 122600, 0, 0, 0,
1, "α", "Китальфа", 211549, 51452, 3.92, "G", 1,
1, "β", "", 212254, 64840, 5.16, "A", 2,
1, "δ", "", 211429, 100025, 4.49, "F", 2,
1, "γ", "", 211021, 100754, 4.69, "F", 2,
1, "ε", "", 205904, 41737, 5.23, "F", 9,

0, "Aql", "Орел", 195300, -32600, 0, 0, 0,
1, "α", "Альтаир", 195047, 85206, 0.77, "A", 1,
1, "γ", "Таразед", 194616, 103648, 2.72, "K", 7,
1, "β", "Альшаин", 195519, 62424, 3.71, "G", 7,
1, "δ", "", 192530, 30653, 3.36, "F", 3,
1, "ζ", "Денеб ел окаб", 190525, 135148, 2.99, "A", 7,
1, "η", "", 195228, 10020, 3.9, "F", 2,
1, "θ", "", 201118, -4917, 3.23, "B", 7,
1, "λ", "", 190615, -45257, 3.44, "B", 2,

0, "Sct", "Щит", 184200, -111800, 0, 0, 0,
1, "α", "", 183512, -81439, 3.85, "K", 1,
1, "β", "", 184711, -44452, 4.22, "G", 2,
1, "HR 7119", "", 185443, -153611, 5.1, "B", 2,
1, "γ", "", 182912, -143357, 4.7, "A", 9,

0, "Sco", "Скорпион", 171830, -324330, 0, 0, 0,
1, "α", "Антарес", 162924, -262555, 0.96, "M", 1,
1, "β", "Аркаб", 160526, -194820, 2.62, "B", 7,
1, "σ", "Альният", 162111, -253534, 2.89, "B", 2,
1, "δ", "Дскубба", 160020, -223718, 2.32, "B", 7,
1, "π", "", 155851, -260651, 2.89, "B", 7,
1, "τ", "", 163553, -281258, 2.82, "B", 2,
1, "ε", "", 165010, -341736, 2.28, "K", 2,
1, "μ1", "", 165152, -380251, 3.08, "B", 2,
1, "μ2", "", 165220, -380103, 3.57, "B", 0,
1, "ζ", "", 165435, -422141, 3.62, "K", 2,
1, "η", "", 171209, -431421, 3.33, "F", 2,
1, "θ", "Саргас", 173719, -425952, 1.87, "F", 2,
1, "ι", "", 174735, -400737, 3.03, "F", 2,
1, "κ", "", 174229, -390148, 2.41, "B", 2,
1, "λ", "Шаула", 173337, -370614, 1.63, "B", 2,
1, "υ", "Лесат", 173046, -371745, 2.69, "B", 2,
1, "HR 6630", "", 174952, -370236, 3.21, "K", 0,
1, "ρ", "", 155653, -291251, 3.88, "B", 0,

0, "Lib", "Весы", 153000, -204700, 0, 0, 0,
1, "α", "Зубен Елгенуби", 145053, -160230, 2.75, "A", 1,
1, "β", "Зубен Елскемали", 151700, -92259, 2.61, "B", 2,
1, "γ", "Зубен Елакраб", 153532, -144722, 3.91, "G", 7,
1, "σ", "Брахиум", 150404, -251655, 3.29, "M", 2,
1, "υ", "", 153702, -280806, 3.58, "K", 0,
1, "τ", "", 153839, -294640, 3.66, "B", 0,

0, "Vir", "Дева", 141900, 0, 0, 0, 0,
1, "γ", "Поррима", 124140, -12658, 3.65, "F", 1,
1, "η", "Заниах", 121954, -4001, 3.89, "A", 2,
1, "β", "Алараф", 115042, 13553, 3.61, "F", 7,
1, "δ", "Аува", 125536, 32351, 3.38, "M", 3,
1, "ε", "Виндемиатрикс", 130211, 105733, 2.83, "G", 7,
1, "ζ", "Хезе", 133442, -3545, 3.37, "A", 2,
1, "α", "Спика", 132512, -110941, 0.98, "B", 2,
1, "θ", "", 130957, -53220, 4.38, "A", 5,
1, "109", "", 144615, 15334, 3.72, "A", 0,
1, "μ", "Рийл Аль Аффа", 144304, -53930, 3.88, "F", 0,

0, "Leo", "Лев", 105825, 113317, 0, 0, 0,
1, "γ", "Альгейба", 101958, 195030, 2.61, "K", 1,
1, "60", "", 110220, 201047, 4.42, "A", 2,
1, "δ", "Зосма", 111407, 203125, 2.56, "A", 2,
1, "β", "Денебола", 114904, 143419, 2.14, "A", 2,
1, "θ", "Чорт", 111414, 152546, 3.34, "A", 2,
1, "α", "Регул", 100822, 115802, 1.35, "B", 2,
1, "η", "", 100720, 164546, 3.52, "A", 9,
1, "ζ", "Адхафера", 101641, 232502, 3.44, "F", 2,
1, "μ", "Рас Эласед Бореалис", 95246, 260025, 3.88, "K", 2,
1, "ε", "Рас Эласед Аустралис", 94551, 234627, 2.98, "G", 2,
1, "ρ", "", 103249, 91824, 3.85, "B", 0,
1, "ο", "", 94109, 95332, 3.52, "F", 0,

0, "Cnc", "Рак", 84200, 140000, 0, 0, 0,
1, "δ", "Аселлус Аустралис", 84441, 180915, 3.94, "K", 1,
1, "β", "Альтарф", 81631, 91108, 3.52, "K", 7,
1, "α", "Акубенс", 85828, 115128, 4.25, "A", 7,
1, "γ", "Аселлус Бореалис", 84317, 212807, 4.66, "A", 2,
1, "ι", "", 84642, 284536, 4.02, "G", 2,

0, "Gem", "Близнецы", 71218, 264817, 0, 0, 0,
1, "δ", "Васат", 72007, 215856, 3.53, "F", 1,
1, "λ", "", 71806, 163225, 3.58, "A", 2,
1, "ξ", "Альзирр", 64517, 125344, 3.36, "F", 7,
1, "β", "Поллукс", 74519, 280134, 1.14, "K", 1,
1, "α", "Кастор", 73436, 315318, 1.98, "A", 2,
1, "ε", "Мебсута", 64356, 250752, 2.98, "G", 2,
1, "μ", "Тейят Постериор", 62258, 223049, 2.88, "M", 2,
1, "γ", "Альхена", 63743, 162357, 1.93, "A", 2,
1, "ζ", "Мекбуда", 70407, 203413, 3.79, "F", 9,
1, "θ", "", 65247, 335740, 3.6, "A", 0,
1, "κ", "", 74427, 242353, 3.57, "G", 0,
1, "η", "Пропус", 61453, 223024, 3.28, "M", 0,

0, "Tau", "Телец", 50900, 242100, 0, 0, 0,
1, "α", "Альдебаран", 43555, 163033, 0.85, "K", 1,
1, "ζ", "", 53739, 210833, 3, "B", 7,
1, "β", "Нат", 52618, 283627, 1.65, "B", 7,
1, "θ", "", 42835, 155744, 3.84, "K", 2,
1, "γ", "Хиадум I", 41948, 153739, 3.65, "K", 2,
1, "δ", "Хиадум II", 42256, 173233, 3.76, "K", 2,
1, "ε", "Аин", 42837, 191049, 3.53, "G", 2,
1, "η", "Альциона", 34729, 240618, 2.87, "B", 0,
1, "27", "Атлас", 34910, 240312, 3.63, "B", 0,
1, "BU", "Плейона", 34911, 240812, 5.09, "B", 0,
1, "20", "Майя", 34550, 242204, 3.87, "B", 0,
1, "19", "Тайгета", 34513, 242802, 4.3, "B", 0,
1, "21", "Астеропа", 34554, 243317, 5.76, "B", 0,
1, "16", "Целена", 34448, 241722, 5.46, "B", 0,
1, "17", "Электра", 34453, 240648, 3.7, "B", 0,
1, "23", "Меропа", 34620, 235654, 4.18, "B", 0,
1, "λ", "", 40041, 122925, 3.47, "B", 0,
1, "ξ", "", 32710, 94358, 3.47, "B", 0,
1, "ο", "", 32449, 90144, 3.6, "G", 0,
1, "ν", "", 40309, 55921, 3.91, "A", 0,

0, "Ari", "Овен", 22800, 213000, 0, 0, 0,
1, "α", "Хамаль", 20710, 232745, 2, "K", 1,
1, "41", "", 24959, 271538, 3.63, "B", 7,
1, "β", "Шератан", 15438, 204829, 2.64, "A", 2,
1, "γ", "Месартим", 15332, 191737, 4.75, "A", 2,

0, "Psc", "Рыбы", 10000, 120000, 0, 0, 0,
1, "γ", "", 231710, 31656, 3.69, "G", 1,
1, "β", "Фум аль самаках", 230353, 34912, 4.53, "B", 7,
1, "7", "", 232021, 52253, 5.05, "K", 2,
1, "θ", "", 232758, 62244, 4.28, "K", 2,
1, "ι", "", 233957, 53735, 4.13, "F", 3,
1, "λ", "", 234203, 14648, 4.5, "A", 2,
1, "κ", "", 232656, 11520, 4.94, "A", 5,
1, "ω", "", 235919, 65148, 4.01, "F", 2,
1, "δ", "", 4841, 73506, 4.43, "K", 2,
1, "ε", "", 10257, 75324, 4.28, "K", 2,
1, "μ", "", 13011, 60838, 4.84, "K", 2,
1, "ν", "", 14126, 52915, 4.44, "K", 2,
1, "α", "Альриша", 20203, 24549, 4.33, "A", 2,
1, "ο", "Торкуларис септентри", 14524, 90928, 4.26, "G", 2,
1, "η", "", 13129, 152045, 3.62, "G", 2,
1, "χ", "", 11127, 210205, 4.66, "G", 2,
1, "φ", "", 11345, 243501, 4.65, "K", 2,
1, "υ", "", 11928, 271551, 4.76, "A", 2,
1, "τ", "", 11140, 300523, 4.51, "K", 2,

0, "Aqr", "Водолей", 232700, -123000, 0, 0, 0,
1, "γ", "Садалакбия", 222139, -12314, 3.84, "A", 1,
1, "ζ", "", 222850, -112, 4.42, "F", 3,
1, "π", "", 222517, 12239, 4.66, "B", 7,
1, "η", "", 223521, -703, 4.02, "B", 4,
1, "α", "Садалмелик", 220547, -1911, 2.96, "G", 2,
1, "β", "Садалсууд", 213134, -53416, 2.91, "G", 2,
1, "ν", "", 210936, -112218, 4.51, "G", 2,
1, "ε", "Албали", 204741, -92945, 3.77, "A", 7,
1, "θ", "Анча", 221650, -74700, 4.16, "G", 3,
1, "ι", "", 220626, -135211, 4.27, "B", 7,
1, "λ", "", 225237, -73447, 3.74, "M", 2,
1, "τ", "", 224936, -133533, 4.01, "M", 2,
1, "δ", "Скат", 225439, -154915, 3.27, "A", 2,
1, "88", "", 230927, -211021, 3.66, "K", 2,
1, "98", "", 232258, -200602, 3.97, "K", 2,
1, "ω", "", 234243, -143242, 4.49, "B", 2,

0, "Cap", "Козерог", 210700, -220000, 0, 0, 0,
1, "β", "Дабих", 202101, -144653, 3.08, "F", 1,
1, "α", "Секунда Гиеди", 201803, -123241, 3.57, "G", 7,
1, "ρ", "", 202852, -174849, 4.78, "F", 2,
1, "ψ", "", 204606, -251615, 4.14, "F", 2,
1, "ω", "", 205243, -265509, 4.11, "M", 2,
1, "ζ", "", 212640, -222441, 3.74, "G", 2,
1, "κ", "", 214240, -185159, 4.73, "G", 2,
1, "δ", "Денеб алгеди", 214702, -160738, 2.87, "A", 2,
1, "γ", "Нашира", 214006, -163944, 3.68, "F", 2,
1, "θ", "", 210557, -171358, 4.07, "A", 9,

0, "Sgr", "Стрелец", 195000, -200000, 0, 0, 0,
1, "δ", "Каус Меридионалис", 182100, -294941, 2.7, "K", 1,
1, "γ", "Наш", 180549, -302527, 2.99, "K", 7,
1, "ε", "Каус Аустралис", 182410, -342305, 1.85, "B", 2,
1, "η", "", 181738, -364542, 3.11, "M", 7,
1, "λ", "Каус Бореалис", 182758, -252518, 2.81, "K", 3, 
1, "μ", "", 181346, -210332, 3.86, "B", 7,
1, "φ", "", 184539, -265927, 3.17, "B", 2,
1, "σ", "Нунки", 185516, -261748, 2.02, "B", 3,
1, "ο", "", 190441, -214457, 3.77, "G", 2,
1, "π", "Албалдах", 190946, -210125, 2.89, "F", 2,
1, "43", "", 191738, -185711, 4.96, "G", 2,
1, "ρ", "", 192140, -175050, 3.93, "F", 2,
1, "υ", "", 192144, -155718, 4.61, "B", 7,
1, "τ", "", 190656, -274014, 3.32, "K", 3,
1, "ψ", "", 191532, -251524, 4.85, "G", 2,
1, "χ", "", 192517, -243031, 5.03, "A", 2, 
1, "52", "", 193642, -245301, 4.6, "B", 2,
1, "ω", "Теребеллум 2", 195550, -261758, 4.7, "G", 7,
1, "ζ", "Асцелла", 190237, -295249, 2.6, "A", 2,
1, "α", "Рубат", 192353, -403658, 3.97, "B", 2,
1, "β1", "Аркаб приор", 192238, -442732, 4.01, "B", 2,
1, "β2", "Аркаб постериор", 192313, -444759, 4.26, "F", 0,
1, "ξ2", "", 185744, -210624, 3.51, "K", 0,

0, "Oph", "Змееносец", 171000, -35400, 0, 0, 0,
1, "δ", "Иед приор", 161421, -34140, 2.74, "M", 1,
1, "λ", "Марфик", 163055, 15902, 3.82, "A", 2,
1, "κ", "", 165740, 92230, 3.2, "K", 2,
1, "α", "Рас Альхаг", 173456, 123336, 2.08, "A", 2,
1, "72", "", 180721, 93350, 3.73, "A", 0,
1, "β", "Кебальраи", 174328, 43402, 2.77, "K", 2,
1, "γ", "", 174754, 24226, 3.75, "A", 2,
1, "η", "Сабик", 171023, -154329, 2.43, "A", 3,
1, "θ", "", 172201, -245958, 3.27, "B", 7,
1, "ζ", "", 163710, -103402, 2.56, "O", 2,
1, "ε", "Иед постериор", 161819, -44133, 3.24, "G", 5,

0, "Ser2", "Хвост Змеи", 180700, -125200, 0, 0, 0,
1, "ξ", "", 173735, -152355, 3.54, "F", 2,
1, "ν", "", 175902, -94625, 3.34, "K", 2,
1, "η", "", 182119, -25356, 3.26, "K", 2,
1, "θ", "", 185613, 41213, 4.62, "A", 4,

0, "Ser1", "Голова Змеи", 160100, 5200, 0, 0, 0,
1, "μ", "", 154937, -32549, 3.53, "A", 2,
1, "ε", "", 155049, 42840, 3.71, "A", 2,
1, "α", "Ункалхаи", 154416, 62532, 2.65, "K", 2,
1, "δ", "", 153448, 103215, 3.8, "F", 2,
1, "β", "Шоф", 154611, 152519, 3.67, "A", 2,
1, "γ", "", 155627, 153942, 3.85, "F", 2,

0, "Ori", "Орион", 51750, 130700, 0, 0, 0,
1, "δ", "Минтака", 53247, -1757, 2.23, "O", 1,
1, "τ", "", 51736, -65040, 3.6, "B", 2,
1, "β", "Ригель", 51432, -81206, 0.12, "B", 2,
1, "κ", "Саиф", 54745, -94011, 2.06, "B", 2,
1, "ζ", "Альнитак", 54046, -15634, 2.05, "O", 3,
1, "ε", "Альнилам", 53613, -11207, 1.17, "B", 5,
1, "α", "Бетельгейзе", 55510, 72425, 0.5, "M", 2,
1, "λ", "Меисса", 53508, 95603, 3.54, "O", 2,
1, "γ", "Беллатрикс", 52508, 62059, 1.64, "B", 5,
1, "ι", "Наир Аль Саиф", 53526, -55436, 2.77, "O", 0,
1, "σ", "", 53845, -23600, 3.81, "O", 0,
1, "η", "", 52429, -22349, 3.36, "B", 0,
1, "π5", "", 45415, 22626, 3.72, "B", 0,
1, "π4", "", 45112, 53618, 3.69, "B", 0,
1, "π3", "", 44950, 65741, 3.19, "F", 0,

0, "CMa", "Большой Пёс", 71100, -125300, 0, 0, 0,
1, "α", "Сириус", 64509, -164258, -1.46, "A", 1,
1, "β", "Мурзим", 62242, -175721, 1.98, "B", 7,
1, "γ", "Мулифен", 70346, -153800, 4.12, "B", 7,
1, "ο2", "", 70302, -235000, 3.02, "B", 2,
1, "δ", "Везен", 70824, -262336, 1.84, "F", 3,
1, "η", "Алуда", 72406, -291811, 2.45, "B", 7,
1, "σ", "", 70143, -275605, 3.47, "K", 2,
1, "ε", "Адара", 65838, -285820, 1.5, "B", 2,
1, "ζ", "Фуруд", 62019, -300348, 3.02, "B", 2,
1, "ω", "", 71449, -264622, 3.85, "B", 0,
1, "ο1", "", 65408, -241102, 3.87, "K", 0,

0, "CMi", "Малый Пёс", 75100, 24600, 0, 0, 0,
1, "α", "Процион", 73918, 51330, 0.38, "F", 1,
1, "β", "Гомейза", 72709, 81722, 2.9, "B", 2,

0, "Mon", "Единорог", 70800, -44800, 0, 0, 0,
1, "δ", "", 71152, -2934, 4.15, "A", 1,
1, "α", "", 74115, -93304, 3.93, "K", 2,
1, "ζ", "", 80836, -25902, 4.34, "G", 7,
1, "β", "", 62849, -70158, 4.6, "B", 2,
1, "γ", "", 61451, -61629, 3.98, "K", 7,
1, "ε", "", 62346, 43534, 4.44, "A", 2,

0, "Hya", "Гидра", 121300, -282400, 0, 0, 0,
1, "ζ", "", 85524, 55644, 3.11, "G", 1,
1, "ε", "", 84647, 62508, 3.38, "G", 2,
1, "δ", "", 83739, 54213, 4.16, "A", 2,
1, "σ", "Аль Минлиар аль Шуйа", 83845, 32029, 4.44, "K", 2,
1, "η", "", 84314, 32355, 4.3, "B", 2,
1, "ρ", "", 84826, 55016, 4.36, "A", 9,
1, "HR 3314", "", 82540, -35423, 3.9, "A", 0,
1, "θ", "", 91422, 21851, 3.88, "B", 2,
1, "ι", "", 93952, -10834, 3.91, "K", 2,
1, "α", "Альфард", 92735, -83931, 1.98, "K", 2,
1, "υ1", "", 95129, -145048, 4.12, "G", 2,
1, "λ", "", 101035, -122115, 3.61, "K", 2,
1, "μ", "", 102605, -165011, 3.81, "K", 2,
1, "ν", "", 104938, -161137, 3.11, "K", 2,
1, "HR 4162", "", 103714, -272445, 4.89, "M", 2,
1, "χ1", "", 110520, -271737, 4.94, "F", 2,
1, "ξ", "", 113300, -315128, 3.54, "G", 2,
1, "β", "", 115255, -335429, 4.28, "B", 2,
1, "γ", "", 131855, -231018, 3, "G", 2,
1, "R", "", 132943, -231653, 4.97, "M", 2,
1, "π", "", 140622, -264057, 3.27, "K", 2,
1, "58", "", 145017, -275737, 4.41, "K", 2,

0, "Sex", "Секстант", 103300, -50200, 0, 0, 0,
1, "α", "", 100756, -2218, 4.49, "A", 1,
1, "γ", "", 95230, -80618, 5.05, "A", 2,
1, "β", "", 103018, -3813, 5.09, "B", 2,

0, "Crt", "Чаша", 113700, -211400, 0, 0, 0,
1, "δ", "", 111921, -144643, 3.56, "G", 1,
1, "α", "Алкес", 105947, -181756, 4.08, "K", 7,
1, "ε", "", 112437, -105134, 4.83, "K", 2,
1, "θ", "", 113641, -94808, 4.7, "B", 7,
1, "γ", "", 112453, -174102, 4.08, "A", 3,
1, "β", "", 111140, -224933, 4.48, "A", 7,
1, "ζ", "", 114446, -182103, 4.73, "G", 2,
1, "η", "", 115601, -170903, 5.18, "A", 2,

0, "Crv", "Ворон", 124500, -183900, 0, 0, 0,
1, "ε", "Микар", 121008, -223711, 3, "K", 1,
1, "γ", "Гиенах Гухураб", 121548, -173231, 2.59, "B", 2,
1, "δ", "Альгораб", 122952, -163056, 2.95, "B", 2,
1, "β", "Краз", 123423, -232348, 2.65, "G", 9,
1, "α", "Алькиба", 120825, -244344, 4.02, "F", 2,

0, "Cet", "Кит", 15500, -42000, 0, 0, 0,
1, "η", "Денеб алгенуби", 10835, -101056, 3.45, "K", 1,
1, "β", "Дифда", 4335, -175912, 2.04, "G", 2,
1, "ι", "Денеб каитос шемали", 1926, -84926, 3.56, "K", 9,
1, "θ", "", 12401, -81100, 3.6, "K", 2,
1, "ζ", "Батен Каитос", 15128, -102006, 3.73, "K", 3,
1, "τ", "", 14404, -155615, 3.5, "G", 2,
1, "υ", "", 20000, -210440, 4, "M", 7,
1, "ο", "Мира", 21921, -25839, 3.04, "M", 2,
1, "δ", "", 23929, 1943, 4.7, "B", 2,
1, "γ", "Каффалийдхма", 24318, 31409, 3.47, "A", 3,
1, "ξ2", "", 22810, 82736, 4.28, "B", 2,
1, "μ", "", 24457, 100651, 4.27, "F", 2,
1, "λ", "", 25943, 85427, 4.7, "B", 2,
1, "α", "Менкар", 30217, 40523, 2.53, "M", 9,

0, "Eri", "Эридан", 41200, -180300, 0, 0, 0,
1, "α", "Ахернар", 13743, -571412, 0.46, "B", 1,
1, "χ", "", 15558, -513632, 3.7, "G", 2,
1, "φ", "", 21631, -513044, 3.56, "B", 2,
1, "κ", "", 22659, -474214, 4.26, "B", 2,
1, "ι", "", 24040, -395120, 4.11, "K", 2,
1, "θ", "Акмар", 25816, -401817, 3.26, "A", 2,
1, "HR 1008", "", 31956, -430411, 4.26, "G", 2,
1, "HR 1106", "", 33706, -401629, 4.58, "K", 2,
1, "HR 1195", "", 34927, -361201, 4.17, "G", 2,
1, "43", "", 42402, -340101, 3.96, "K", 2,
1, "υ4", "", 41754, -334754, 3.56, "B", 2,
1, "υ2", "Темим", 43533, -303344, 3.82, "G", 0,
1, "τ9", "", 35956, -240059, 4.66, "B", 2,
1, "τ6", "", 34651, -231459, 4.23, "F", 2,
1, "τ5", "", 33347, -213758, 4.27, "B", 2,
1, "τ4", "", 31931, -214528, 3.69, "M", 2,
1, "15", "", 31822, -223041, 4.88, "G", 2,
1, "τ3", "", 30224, -233728, 4.09, "A", 2,
1, "τ2", "Ангетенар", 25102, -210015, 4.75, "K", 2,
1, "τ1", "", 24506, -183421, 4.47, "F", 2,
1, "η", "Азха", 25626, -85353, 3.89, "K", 2,
1, "ζ", "Зибал", 31550, -84911, 4.8, "A", 2,
1, "ε", "", 33256, -92730, 3.73, "K", 2,
1, "δ", "Рана", 34315, -94548, 3.54, "K", 2,
1, "π", "", 34609, -120606, 4.42, "M", 2,
1, "γ", "Заурак", 35802, -133031, 2.95, "M", 2,
1, "53", "Сцептрум", 43811, -141814, 3.87, "K", 0,
1, "ο1", "Бейд", 41152, -65015, 4.04, "F", 2,
1, "ν", "", 43619, -32109, 3.93, "B", 2,
1, "μ", "", 44530, -31517, 4.02, "B", 2,
1, "β", "Курса", 50751, -50511, 2.79, "A", 2,

0, "Lep", "Заяц", 55500, -233000, 0, 0, 0,
1, "μ", "", 51256, -161220, 3.31, "B", 1,
1, "κ", "", 51314, -125629, 4.36, "B", 7,
1, "λ", "", 51935, -131036, 4.29, "Β", 7,
1, "ε", "", 50528, -222216, 3.19, "K", 2,
1, "β", "Нихал", 52815, -204534, 2.84, "G", 2,
1, "γ", "", 54428, -222654, 3.6, "F", 2,
1, "δ", "", 55119, -205245, 3.81, "Κ", 7,
1, "α", "Арнеб", 53244, -174920, 2.58, "F", 2,
1, "ζ", "", 54657, -144919, 3.55, "A", 2,
1, "η", "", 55624, -141004, 3.71, "F", 2,

0, "Cae", "Резец", 44500, -392800, 0, 0, 0,
1, "δ", "", 43050, -445714, 5.07, "B", 1,
1, "α", "", 44034, -415150, 4.45, "F", 2,
1, "β", "", 44204, -370840, 5.05, "F", 2,
1, "γ1", "", 50424, -352900, 4.55, "K", 2,

0, "Col", "Голубь", 61600, -384500, 0, 0, 0,
1, "β", "Везен", 55058, -354606, 3.12, "K", 1,
1, "α", "Фет", 53939, -340427, 2.64, "B", 2,
1, "ε", "", 53113, -352814, 3.87, "K", 7,
1, "δ", "", 62207, -332611, 3.85, "G", 7,
1, "η", "", 55909, -424855, 3.96, "K", 2,

0, "Pup", "Корма", 65400, -460900, 0, 0, 0,
1, "ζ", "Наос", 80335, -400012, 2.25, "O", 1,
1, "ξ", "Азмидиск", 74918, -245135, 3.34, "G", 2,
1, "ρ", "", 80733, -241815, 2.81, "F", 7,
1, "HR 3017", "", 74515, -375807, 3.61, "K", 0,
1, "HR 3080", "", 75213, -403433, 3.73, "K", 0,
1, "σ", "", 72914, -431805, 3.25, "K", 3,
1, "π", "", 71709, -370551, 2.7, "K", 5,
1, "L2", "", 71332, -443823, 5.1, "M", 3,
1, "τ", "", 64956, -503653, 2.93, "K", 2,
1, "ν", "", 63746, -431146, 3.17, "B", 9,

0, "Pyx", "Компас", 90400, -315900, 0, 0, 0,
1, "β", "", 84006, -351830, 3.97, "G", 1,
1, "α", "", 84336, -331111, 3.68, "B", 2,
1, "γ", "", 85032, -274236, 4.01, "K", 2,

0, "Ant", "Насос", 102900, -360000, 0, 0, 0,
1, "ε", "", 92915, -355705, 4.51, "K", 1,
1, "α", "", 102709, -310404, 4.25, "K", 2,
1, "ι", "", 105643, -370816, 4.6, "K", 2,

0, "Vel", "Паруса", 95000, -471100, 0, 0, 0,
1, "λ", "Альсухейл", 90800, -432557, 2.21, "K", 1,
1, "ψ", "", 93042, -402800, 3.6, "F", 2,
1, "HR 4023", "", 101444, -420719, 3.85, "A", 7,
1, "κ", "", 92207, -550039, 2.5, "B", 3,
1, "δ", "", 84442, -544230, 1.96, "A", 2,
1, "γ", "Сухел аль мухлиф", 80932, -472012, 1.78, "O", 5,
1, "HR 3445", "", 84038, -463856, 3.84, "F", 0,
1, "HR 3487", "", 84602, -460230, 3.91, "A", 0,
1, "HR 3614", "", 90409, -470552, 3.75, "K", 0,
1, "ο", "", 84018, -525519, 3.62, "B", 0,
1, "φ", "", 95652, -543404, 3.54, "B", 2,
1, "μ", "", 104646, -492512, 2.69, "G", 2,
1, "HR 4167", "", 103718, -481333, 3.84, "F", 2,
1, "N", "", 93113, -570204, 3.13, "K", 0,

0, "Car", "Киль", 74000, -571400, 0, 0, 0,
1, "ι", "Тураис", 91705, -591631, 2.25, "A", 1,
1, "υ", "", 94706, -650419, 3.01, "A", 2,
1, "β", "Миаплацидус", 91312, -694302, 1.68, "A", 2,
1, "ω", "", 101344, -700217, 3.32, "B", 2,
1, "θ", "", 104257, -642340, 2.76, "B", 2,
1, "PP", "", 103201, -614107, 3.32, "B", 2,
1, "HR 4050", "", 101705, -611956, 3.4, "K", 9,
1, "ε", "Авиор", 82231, -593035, 1.86, "K", 2,
1, "χ", "", 75647, -525856, 3.47, "B", 2,
1, "α", "Канопус", 62357, -524145, -0.72, "F", 2,
1, "HR 4337", "", 110835, -585830, 3.91, "G", 0,
1, "HR 4257", "", 105327, -585112, 3.78, "K", 0,
1, "HR 4114", "", 102753, -584422, 3.82, "F", 0,
1, "I", "", 94515, -623028, 3.69, "G", 0,
1, "HR 3659", "", 91058, -585801, 3.44, "B", 0,
1, "HR 3571", "", 85503, -603841, 3.84, "B", 0,

0, "Cen", "Кентавр", 123600, -422400, 0, 0, 0,
1, "ε", "", 133953, -532759, 2.3, "B", 1,
1, "β", "Агена", 140349, -602223, 0.61, "B", 2,
1, "α", "Ригл Кентаурус", 143936, -605007, -0.01, "G", 7,
1, "γ", "", 124131, -485735, 2.17, "A", 3,
1, "δ", "", 120822, -504321, 2.6, "B", 2,
1, "π", "", 112100, -542928, 3.89, "B", 2,
1, "λ", "", 113547, -630111, 3.13, "B", 7,
1, "ι", "", 132129, -364244, 2.75, "A", 2,
1, "θ", "Менкент", 140641, -362212, 2.06, "K", 2,
1, "η", "", 143530, -420928, 2.31, "B", 2,
1, "ζ", "", 135532, -471718, 2.55, "B", 5,
1, "κ", "", 145910, -420615, 3.13, "B", 0,
1, "ν", "", 134930, -414116, 3.41, "B", 0,
1, "μ", "", 134937, -422826, 3.04, "B", 0,
1, "φ", "", 135816, -420603, 3.83, "B", 0,
1, "υ", "", 135841, -444813, 3.87, "B", 0,
1, "τ", "", 123742, -483228, 3.86, "A", 0,
1, "σ", "", 122802, -501350, 3.91, "B", 0,

0, "Cru", "Южный Крест", 122800, -611200, 0, 0, 0,
1, "α", "Акрукс", 122636, -630557, 1.33, "B", 1,
1, "γ", "Гакрукс", 123110, -570648, 1.63, "M", 2,
1, "β", "Бекрукс", 124743, -594119, 1.25, "B", 1,
1, "δ", "", 121509, -584456, 2.8, "B", 2,

0, "Lup", "Волк", 152806, -324000, 0, 0, 0,
1, "α", "", 144156, -472318, 2.3, "B", 1,
1, "β", "", 145832, -430802, 2.68, "B", 2,
1, "δ", "", 152122, -403851, 3.22, "B", 2,
1, "φ1", "", 152148, -361541, 3.56, "K", 2,
1, "ψ1", "", 153946, -342443, 4.67, "G", 2,
1, "χ", "", 155058, -333738, 3.95, "B", 2,
1, "η", "", 160007, -382349, 3.41, "B", 2,
1, "γ", "", 153509, -411001, 2.78, "B", 2,
1, "ε", "", 152241, -444122, 3.37, "B", 2,
1, "κ", "", 151156, -484416, 3.87, "B", 2,
1, "ζ", "", 151217, -520557, 3.41, "G", 9,
1, "ι", "", 141924, -460328, 3.55, "B", 0,

0, "Nor", "Наугольник", 160900, -532000, 0, 0, 0,
1, "γ2", "", 161950, -500920, 4.02, "G", 1,
1, "η", "", 160313, -491347, 4.65, "G", 2,
1, "δ", "", 160629, -451024, 4.72, "A", 2,
1, "ε", "", 162711, -473318, 4.47, "B", 9,

0, "Ara", "Жертвенник", 175100, -540600, 0, 0, 0,
1, "β", "", 172518, -553148, 2.85, "K", 1,
1, "α", "", 173151, -495234, 2.95, "B", 2,
1, "θ", "", 180638, -500530, 3.66, "B", 7,
1, "γ", "", 172524, -562239, 3.34, "B", 2,
1, "δ", "", 173106, -604102, 3.62, "B", 7,
1, "ζ", "", 165837, -555925, 3.13, "K", 3,
1, "ε1", "", 165935, -530938, 4.06, "K", 7,
1, "η", "", 164947, -590229, 3.76, "K", 2,

0, "CrA", "Южная Корона", 185300, -405200, 0, 0, 0,
1, "ε", "", 185843, -370627, 4.87, "F", 1,
1, "γ", "", 190625, -370348, 4.93, "F", 2,
1, "α", "Альдфесса Меридиана", 190928, -375416, 4.11, "A", 2,
1, "β", "", 191002, -392027, 4.11, "K", 2,
1, "δ", "", 190821, -402948, 4.59, "K", 2,
1, "ζ", "", 190307, -420543, 4.75, "B", 2,
1, "η1", "", 184851, -434048, 5.49, "A", 2,
1, "θ", "", 183330, -421845, 4.64, "G", 2,
1, "HR 6942", "", 183221, -394214, 5.16, "A", 2,
1, "λ", "", 184347, -381925, 5.13, "A", 2,

0, "Tel", "Телескоп", 190700, -502900, 0, 0, 0,
1, "α", "", 182658, -455806, 3.51, "B", 1,
1, "ε", "", 181114, -455716, 4.53, "K", 7,
1, "ζ", "", 182850, -490415, 4.13, "G", 2,
1, "λ", "", 185828, -525619, 4.87, "A", 2,
1, "ξ", "", 200723, -525251, 4.94, "M", 2,
1, "ι", "", 193513, -480557, 4.9, "K", 9,

0, "Ind", "Индеец", 205000, -531300, 0, 0, 0,
1, "θ", "", 211952, -532659, 4.39, "A", 1,
1, "β", "", 205449, -582715, 3.65, "K", 7,
1, "δ", "", 215755, -545933, 4.4, "F", 7,
1, "α", "", 203734, -471729, 3.11, "K", 2,

0, "Mic", "Микроскоп", 210600, -380100, 0, 0, 0,
1, "ε", "", 211756, -321021, 4.71, "A", 1,
1, "γ", "", 210118, -321528, 4.67, "G", 2,
1, "α", "", 204958, -334647, 4.9, "G", 2,
1, "ι", "", 204829, -435919, 5.11, "F", 2,
1, "θ1", "", 212046, -404835, 4.82, "A", 9,

0, "PsA", "Южная Рыба", 223800, -303216, 0, 0, 0,
1, "α", "Фомальгаут", 225739, -293720, 1.16, "A", 1,
1, "δ", "", 225557, -323223, 4.21, "G", 2,
1, "γ", "", 225232, -325232, 4.46, "A", 2,
1, "β", "", 223130, -322046, 4.29, "A", 2,
1, "μ", "", 220823, -325919, 4.5, "A", 2,
1, "ι", "", 214457, -330133, 4.34, "A", 2,
1, "ε", "", 224039, -270237, 4.17, "B", 9,

0, "Scl", "Скульптор", 10300, -331500, 0, 0, 0,
1, "β", "", 233258, -374906, 4.37, "B", 1,
1, "γ", "", 231849, -323155, 4.41, "K", 2,
1, "δ", "", 234856, -280749, 4.57, "A", 2,
1, "α", "", 5836, -292127, 4.31, "B", 2,

0, "For", "Печь", 30000, -333900, 0, 0, 0,
1, "α", "Форнацис", 31204, -285913, 3.87, "F", 1,
1, "β", "", 24905, -322421, 4.46, "K", 2,
1, "ν", "", 20429, -291749, 4.69, "B", 2,

0, "Phe", "Феникс", 1300, -521200, 0, 0, 0,
1, "β", "", 10605, -464307, 3.31, "G", 1,
1, "κ", "", 2612, -434048, 3.94, "A", 2,
1, "α", "Анкаа", 2617, -421822, 2.39, "K", 0,
1, "ε", "", 925, -454451, 3.88, "K", 7,
1, "γ", "", 12822, -431906, 3.41, "M", 2,
1, "δ", "", 13115, -490422, 3.95, "K", 2,
1, "ζ", "", 10823, -551445, 3.92, "B", 9,

0, "Gru", "Журавль", 224400, -412100, 0, 0, 0,
1, "δ1", "", 222916, -432944, 3.97, "G", 1,
1, "β", "", 224240, -465305, 2.1, "M", 2,
1, "ι", "", 231022, -451448, 3.9, "K", 0,
1, "ε", "", 224833, -511901, 3.49, "Α", 2,
1, "ζ", "", 230053, -524515, 4.12, "G", 7,
1, "α", "Алнаир", 220814, -465740, 1.74, "B", 7,
1, "γ", "", 215356, -372154, 3.01, "B", 2,

0, "Hor", "Часы", 33900,-480852, 0, 0, 0,
1, "α", "", 41400, -421740, 3.86, "K", 1,
1, "ι", "", 24234, -504801, 5.41, "G", 2,
1, "η", "", 23724, -523235, 5.34, "A", 2,
1, "ζ", "", 24040, -543300, 5.21, "F", 2,
1, "μ", "", 30337, -594416, 5.11, "F", 2,
1, "β", "", 25848, -640417, 4.99, "A", 2,

0, "Ret", "Сетка", 35400, -583300, 0, 0, 0,
1, "α", "", 41426, -622826, 3.35, "G", 1,
1, "ε", "", 41629, -591807, 4.44, "K", 2,
1, "δ", "", 35845, -612401, 4.56, "M", 2,
1, "γ", "", 40054, -620934, 4.51, "M", 2,
1, "β", "", 34412, -644825, 3.85, "K", 9,

0, "Dor", "Золотая Рыба", 50100, -600100, 0, 0, 0,
1, "γ", "", 41602, -512912, 4.25, "F", 1,
1, "α", "", 43400, -550242, 3.27, "A", 2,
1, "β", "", 53338, -622923, 3.76, "F", 2,
1, "δ", "", 54446, -654408, 4.35, "A", 2,

0, "Pic", "Живописец", 53000, -483800, 0, 0, 0,
1, "β", "", 54717, -510359, 3.85, "A", 1,
1, "γ", "", 54950, -561000, 4.51, "K", 2,
1, "α", "", 64811, -615629, 3.27, "A", 2,

0, "Tuc", "Тукан", 1816, -681306, 0, 0, 0,
1, "α", "", 221830, -601535, 2.86, "K", 1,
1, "γ", "", 231726, -581409, 3.99, "F", 2,
1, "β", "", 3133, -625729, 4.37, "B", 2,
1, "ζ", "", 2004, -645229, 4.23, "F", 2,
1, "ε", "", 235955, -653438, 4.5, "B", 2,
1, "δ", "", 222720, -645759, 4.48, "B", 9,

0, "Hyi", "Южная Гидра", 20800, -725300, 0, 0, 0,
1, "α", "Голова Гидры", 15846, -612927, 2.86, "F", 1,
1, "β", "", 2545, -771515, 2.8, "G", 2,
1, "γ", "", 34714, -741420, 3.24, "M", 2,

0, "Men", "Столовая гора", 52900, -801100, 0, 0, 0,
1, "α", "", 61014, -744511, 5.09, "G", 1,
1, "γ", "", 53153, -762028, 5.19, "K", 2,
1, "η", "", 45511, -745613, 5.47, "K", 2,
1, "β", "", 50243, -711852, 5.31, "G", 2,

0, "Vol", "Летучая Рыба", 70300, -662600, 0, 0, 0,
1, "β", "", 82544, -660813, 3.77, "K", 1,
1, "α", "", 90227, -662346, 4, "A", 7,
1, "δ", "", 71650, -675726, 3.98, "F", 2,
1, "γ2", "", 70845, -702956, 3.78, "K", 2,
1, "ζ", "", 74149, -723622, 3.95, "K", 2,
1, "ε", "", 80756, -683702, 4.35, "B", 9,

0, "Cha", "Хамелеон", 92500, -822800, 0, 0, 0,
1, "α", "", 81832, -765511, 4.07, "F", 1,
1, "γ", "", 103528, -783628, 4.11, "M", 2,
1, "β", "", 121821, -791844, 4.26, "B", 2,
1, "δ", "", 104547, -803225, 4.45, "B", 2,
1, "θ", "", 82039, -772904, 4.35, "K", 2,

0, "Mus", "Муха", 115005, -724632, 0, 0, 0,
1, "α", "", 123711, -690808, 2.69, "B", 1,
1, "ε", "", 121734, -675739, 4.11, "M", 2,
1, "λ", "", 114536, -664343, 3.64, "A", 7,
1, "γ", "", 123228, -720759, 3.87, "B", 2,
1, "δ", "", 130216, -713256, 3.62, "K", 2,
1, "β", "", 124617, -680629, 3.05, "B", 9,

0, "Cir", "Циркуль", 151100, -570100, 0, 0, 0,
1, "β", "", 151731, -584804, 4.07, "A", 1,
1, "α", "", 144230, -645831, 3.19, "A", 2,
1, "γ", "", 152323, -591915, 4.51, "B", 2,

0, "TrA", "Южный Треугольник", 160200, -672500, 0, 0, 0,
1, "α", "", 164840, -690140, 1.92, "K", 1,
1, "γ", "", 151855, -684414, 2.89, "A", 2,
1, "ε", "", 153643, -661901, 4.11, "K", 2,
1, "β", "", 155509, -632550, 2.85, "F", 9,
1, "δ", "", 161526, -634108, 3.85, "G", 0,

0, "Pav", "Павлин", 191100, -675408, 0, 0, 0,
1, "β", "", 204458, -661211, 3.42, "A", 1,
1, "α", "Пекок", 202540, -564406, 1.94, "B", 7,
1, "γ", "", 212627, -652158, 4.22, "F", 7,
1, "δ", "", 200844, -661055, 3.56, "G", 2,
1, "λ", "", 185213, -621115, 4.22, "B", 2,
1, "ξ", "", 182314, -612938, 4.36, "K", 2,
1, "η", "", 174544, -644326, 3.62, "K", 2,
1, "ζ", "", 184302, -712541, 4.01, "K", 2,
1, "ε", "", 200036, -725438, 3.96, "A", 9,

0, "Aps", "Райская Птица", 154000, -752600, 0, 0, 0,
1, "α", "", 144752, -790241, 3.83, "K", 1,
1, "γ", "", 163327, -785350, 3.89, "G", 2,
1, "β", "", 164305, -773103, 4.24, "K", 2,
1, "δ1", "", 162021, -784145, 4.68, "M", 2,

0, "Oct", "Октант", 205400, -833400, 0, 0, 0,
1, "β", "", 224603, -812254, 4.15, "A", 1,
1, "θ", "", 136, -770357, 4.78, "K", 7,
1, "ν", "", 214129, -772324, 3.76, "K", 2,
1, "δ", "", 142655, -834004, 4.32, "K", 9,

];

// База объектов Солнечной системы на эпоху J2000.
// Тип, обозначение, название, период обращения, большая полуось, эксцентриситет, наклонение, долгота восходящего узла, аргумент перицентра, средняя долгота, цвет, радиус, альбедо.
var solSys = [
0, "☉", "Солнце", 1, 1, 0.016718, 0, 0, 282.94719, 280.46435, "#ffff00", 695510, 0,
1, "☾", "Луна", 0.074804012, 0.0025695, 0.0554, 5.16, 125.08, 318.15, 218.5, "#dfc691", 1737.4, 0.12,
2, "☿", "Меркурий", 0.240846, 0.38709893, 0.205631, 7.00487, 48.33167, 77.45645, 252.25084, "#f5deb3", 2439.7, 0.142,
2, "♀", "Венера", 0.615198, 0.72333199, 0.00677323, 3.39471, 76.68069, 131.53298, 181.97973, "#fffff0", 6051.8, 0.67,
2, "♂", "Марс", 1.8808, 1.52366231, 0.09341233, 1.85061, 49.57854, 336.04084, 355.45332, "#ffa07a", 3389.5, 0.15,
2, "♃", "Юпитер", 11.8618, 5.20336301, 0.04839266, 1.30530, 100.55615, 14.75385, 34.40438, "#faf0e6", 69911, 0.52,
2, "♄", "Сатурн", 29.4571, 9.53707032, 0.05415060, 2.48446, 113.71504, 92.43194, 49.94432, "#ffefd5", 58232, 0.47,
2, "⛢", "Уран", 84.0205, 19.19126393, 0.04716771, 0.76986, 74.22988, 170.96424, 313.23218, "#afeeee", 25362, 0.51,
2, "♆", "Нептун", 164.8, 30.06896348, 0.00858587, 1.76917, 131.72169, 44.97135, 304.88003, "#f0ffff", 24622, 0.41,
2, "♇", "Плутон", 248, 39.48168677, 0.24880766, 17.14175, 110.30347, 224.06676, 238.92881, "#ffebcd", 1187, 0.6,

];

// Загрузка сохраненного состояния.
if (localStorage.getItem("sc_azimut")) az = +localStorage.getItem("sc_azimut");
if (localStorage.getItem("sc_yz")) yz = +localStorage.getItem("sc_yz");
if (localStorage.getItem("sc_zoom")) zoom = +localStorage.getItem("sc_zoom");
if (localStorage.getItem("sc_latitude")) Lat = +localStorage.getItem("sc_latitude");
if (localStorage.getItem("sc_longitude")) Long = +localStorage.getItem("sc_longitude");
if (localStorage.getItem("sc_vmod")) vmod = +localStorage.getItem("sc_vmod");

// Преобразование базы звезд в удобочитаемый вид.
for (var i=0, n=8; i<starsBase.length/n; i++ ) {
	var j=i*n;
	star[i]={};
	star[i].id=starsBase[j++];
	star[i].name1=starsBase[j++];
	star[i].name2=starsBase[j++];
	star[i].a0=hms_to_h(starsBase[j++]);
	star[i].d0=hms_to_h(starsBase[j++]);
	star[i].m=starsBase[j++];
	star[i].color=starsColor(starsBase[j++]);
	star[i].line=starsBase[j++];
}

// Преобразование базы объектов Солнечной системы.
for (var i=0, n=13; i<solSys.length/n; i++ ) {
	var j=i*n;
	planet[i]={};
	planet[i].id=solSys[j++];
	planet[i].name1=solSys[j++];
	planet[i].name2=solSys[j++];
	planet[i].T=solSys[j++];
	planet[i].a_=solSys[j++];
	planet[i].e=solSys[j++];
	planet[i].i=solSys[j++];
	planet[i].O=solSys[j++];
	planet[i].w=solSys[j++];
	planet[i].l0=solSys[j++];
	planet[i].color=solSys[j++];
	planet[i].R=solSys[j++]/1496e5;
	planet[i].Al=solSys[j++];
}

// Ядро программы.
precession();
calc();
setInterval(calc, 30000);
window.onresize = draw;

// Определение местоположения из браузера.
if (!localStorage.getItem("sc_latitude") || !localStorage.getItem("sc_longitude")) {
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(function(position) {
			Lat = position.coords.latitude;
			Long = position.coords.longitude;
			localStorage.setItem("sc_latitude", Lat);
			localStorage.setItem("sc_longitude", Long);
			calc();
		});
	}
}

// Вызов справки.
canvas.ondblclick = function() {
	var modalWin = document.getElementById('helpWin');
	if (vmod == 1) {
		modalWin.style.color = 'black';
		modalWin.style.background = 'white';
		modalWin.style.border = '1px solid';
	}
	else if (vmod == 2) {
		modalWin.style.color = 'silver';
		modalWin.style.background = '#080808';
		modalWin.style.border = '1px solid red';
	}
	else {
		modalWin.style.color = 'red';
		modalWin.style.background = 'black';
		modalWin.style.border = '1px solid';
	}
	modalWin.style.display = 'block';

	canvas.onclick = function() {
		modalWin.style.display = 'none';
		canvas.onclick = null;
	};
}

// Сохранение состояния при закрытии.
window.onbeforeunload = function() {
	localStorage.setItem("sc_azimut", az);
	localStorage.setItem("sc_yz", yz);
	localStorage.setItem("sc_zoom", zoom);
	localStorage.setItem("sc_vmod", vmod);
}

// Назначение клавиш нажатия.
window.onkeydown = function(event) {
	switch (event.keyCode) {
		case 37: // ← - вращение неба против часовой
			if (zoom>1) az+=5/zoom;
			else az+=5/zoom;
			draw();
			break;
		case 39: // → - вращение неба по часовой
			if (zoom>1) az-=5/zoom;
			else az-=5/zoom;
			draw();
			break;
		case 38: // ↑ - обзор неба вверх
			yz+=0.03;
			if (yz>zoom) yz=zoom;
			draw();
			break;
		case 40: // ↓ - обзор неба вниз
			yz-=0.03;
			if (yz<1-zoom) yz=1-zoom;
			draw();
			break;
		case 33: // Pg Up - увеличение
			if (zoom<24) {
				zoom*=1.1;
				yz-=(0.5-yz)*0.1;
			}
			draw();
			break;
		case 34: // Pg Down - уменьшение
			zoom*=0.9;
			if (zoom<0.5) zoom=0.5;
			else yz+=(0.5-yz)*0.1;
			if (yz<1-zoom) yz=1-zoom;
			if (yz>zoom) yz=zoom;
			draw();
			break;
	}
}

// Назначение клавиш отжатия.
window.onkeyup = function(event) {
	switch (event.keyCode) {
		case 88: // X - получить координаты из браузера
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					Lat = position.coords.latitude;
					Long = position.coords.longitude;
					localStorage.setItem("sc_latitude", Lat);
					localStorage.setItem("sc_longitude", Long);
					calc();
				});
			}
			break;
		case 67: // C - задать свои координаты
			var sLat = prompt('Вводи широту в градусах', Lat);
			if (sLat!=null && +sLat>=-90 && +sLat<=90) {
				Lat=+sLat;
				if (Math.abs(Lat)==90) Lat-=Math.sign(Lat)*0.0001;
				localStorage.setItem("sc_latitude", Lat);
			}
			var sLong = prompt('Вводи долготу в градусах', Long);
			if (sLong!=null && +sLong>=-180 && +sLong<=180) {
				Long=+sLong;
				localStorage.setItem("sc_longitude", Long);
			}
			calc();
			break;
		case 87: // W - обзор севера
			az=0, yz=0, zoom=1;
			draw();
			break;
		case 65: // A - обзор запада
			az=90, yz=0, zoom=1;
			draw();
			break;
		case 83: // S - обзор юга
			az=180, yz=0, zoom=1;
			draw();
			break;
		case 68: // D - обзор востока
			az=270, yz=0, zoom=1;
			draw();
			break;
		case 76: // L - отображение линий созвездий
			conlines=~conlines;
			draw();
			break;
		case 78: // N - отображение названий созвездий
			connames++;
			if (connames > 2) connames=0;
			draw();
			break;
		case 77: // M - отображение названий звезд
			starnames++;
			if (starnames > 2) starnames=0;
			draw();
			break;
		case 66: // B - отображение названий планет
			planetnames++;
			if (planetnames > 2) planetnames=0;
			draw();
			break;
		case 80: // P - отображение планет
			planets=~planets;
			draw();
			break;
		case 72: // H - отображение азимутальной сетки
			gridlines=~gridlines;
			draw();
			break;
		case 82: // R - учет атмосферной рефракции
			ref=~ref;
			calc();
			break;
		case 86: // V - смена визуальных режимов
			vmod++;
			if (vmod > 3) vmod=1;
			draw();
			var modalWin = document.getElementById('helpWin');
			if (vmod == 1) {
				modalWin.style.color = 'black';
				modalWin.style.background = 'white';
				modalWin.style.border = '1px solid';
			}
			else if (vmod == 2) {
				modalWin.style.color = 'silver';
				modalWin.style.background = '#080808';
				modalWin.style.border = '1px solid red';
			}
			else {
				modalWin.style.color = 'red';
				modalWin.style.background = 'black';
				modalWin.style.border = '1px solid';
			}
			break;
	}
}

// Основная функция отрисовки.
function draw() {
	canvas.width = window.innerWidth;
	canvas.height = window.innerHeight;
	context.font = "12px Arial";
	if (az%1==0) az+=0.0001; // костыль для хромог
	if (vmod>1) context.fillStyle="black";
	else context.fillStyle="white";
	context.fillRect(0, 0, canvas.width, canvas.height);
	if (vmod==1) {
		context.fillStyle="black";
		context.strokeStyle="black";
	}
	if (vmod==3) {
		context.fillStyle="red";
		context.strokeStyle="red";
	}
	skyline();
	if (gridlines==1) grid();
	stars();
	if (planets==1) drawPlanets();
}

// Отрисовка созвездий.
function stars() {
	if (vmod==2) context.fillStyle="silver";
	for (var i=0, len=star.length; i<len; i++) {
		if (star[i].id==0 && star[i].h>0 && connames!=0) {
			var x=hA_to_x(star[i].h, star[i].A+az);
			var y=hA_to_y(star[i].h, star[i].A+az); 
			if (connames==1) context.fillText(star[i].name2, x, y);
			else context.fillText(star[i].name1, x, y);
		}
		if (star[i].id==1) {
			var x=hA_to_x(star[i].h, star[i].A+az);
			var y=hA_to_y(star[i].h, star[i].A+az);
			var r=3.2-0.4*star[i].m;
			if (star[i].h>0) {
				if (vmod==2) context.fillStyle=star[i].color;
				context.beginPath();
				context.arc(x, y, r, 0, 2*Math.PI);
				context.fill();
				if (vmod==2) context.fillStyle="silver";
				if (starnames==1) context.fillText(star[i].name2, x+10, y-10);
				if (starnames==2) context.fillText(star[i].name1, x+10, y-10);
			}
			if (conlines==1) conline(x, y, i);
			clinH=star[i].h;
		}
	}
}

// Отрисовка планет.
function drawPlanets() {
	if (vmod==2) context.fillStyle="silver";
	for (var i=0; i<planet.length; i++) {
		if (planet[i].h>-1) {
			var x=hA_to_x(planet[i].h, planet[i].A+az);
			var y=hA_to_y(planet[i].h, planet[i].A+az);
			var R=canvas.height*dh*zoom/90*planet[i].q;
			R/=Math.pow(Math.cos((45-planet[i].h/2)*k), 2);
			var r=3.2-0.4*planet[i].m;
			if (R>r) r=R;
			if (r<0.3) r=0.3;
			if (vmod==2) context.fillStyle=planet[i].color;
			if (i>0 && i<5) {
				var sin=Math.sin(planet[i].A*k)*Math.cos(Lat*k)/Math.cos(planet[i].d*k);
				var N=Math.asin(sin)/k;
				if (Lat<0) N=180-N;
				var a=180-planet[i].A-az-N-planet[i].K;
				crescent(x, y, r, a*k, planet[i].F);
			}
			else {
				context.beginPath();
				context.arc(x, y, r, 0, 2*Math.PI);
				context.fill();
			}
			if (vmod==2) context.fillStyle="silver";
			if (planetnames==1) context.fillText(planet[i].name2, x+10, y-10-r);
			if (planetnames==2) context.fillText(planet[i].name1, x+10, y-10-r);
		}
	}
}

// Построение серпа светила
function crescent(x, y, r, a, f) {
	var sin=Math.sin(a);
	var cos=Math.cos(a);
	var rb=2*r*(f-0.5);
	context.save();
	if (vmod==2) context.fillStyle="#181818";
	else if (vmod==3) context.fillStyle="#180000";
	else context.fillStyle="#e9e9e9";
	context.beginPath();
	context.arc(x, y, r, 0, 2*Math.PI);
	context.fill();
	context.restore();
	context.beginPath();
	context.arc(x, y, r, a, Math.PI+a);
	for (var i=0; i<180; i+=10) {
		var j=(i+180)*k;
		var xx=r*Math.cos(j);
		var yy=rb*Math.sin(j);
		context.lineTo(xx*cos-yy*sin+x, xx*sin+yy*cos+y);
	}
	context.fill();
}

// Построение линий созвездий.
function conline(x, y, i) {
	switch (star[i].line) {
		case 1: // начало
			clinX=x;
			clinY=y;
			knot.length=0;
			knot[0]={};
			knot[0].x=x;
			knot[0].y=y;
			break;
		case 2: // линия
			cline(x, y, i);
			break;
		case 3: // узел
			cline(x, y, i);
			knot[knot.length]={};
			knot[knot.length-1].x=x;
			knot[knot.length-1].y=y;
			break;
		case 4: // конец и закрыть узел
			cline(x, y, i);
			knot.length-=1;
			clinX=knot[knot.length-1].x;
			clinY=knot[knot.length-1].y;
			break;
		case 5: // связать с прошлым
			cline(x, y, i);
			var x=knot[knot.length-2].x;
			var y=knot[knot.length-2].y;
			cline(x, y, i);
			clinX=knot[knot.length-1].x;
			clinY=knot[knot.length-1].y;
			break;
		case 6: // узел с заменой
			cline(x, y, i);
			knot[knot.length-1]={};
			knot[knot.length-1].x=x;
			knot[knot.length-1].y=y;
			break;
		case 7: // конец
			cline(x, y, i);
			clinX=knot[knot.length-1].x;
			clinY=knot[knot.length-1].y;
			break;
		case 8: // связать и закрыть узел
			cline(x, y, i);
			var x=knot[knot.length-1].x;
			var y=knot[knot.length-1].y;
			cline(x, y, i);
			knot.length-=1;
			clinX=knot[knot.length-1].x;
			clinY=knot[knot.length-1].y;
			break;
		case 9: // связать
			cline(x, y, i);
			var x=knot[knot.length-1].x;
			var y=knot[knot.length-1].y;
			cline(x, y, i);
			break;
		case 10: // связать с прошлым и узел
			cline(x, y, i);
			knot[knot.length]={};
			knot[knot.length-1].x=x;
			knot[knot.length-1].y=y;
			var x=knot[knot.length-3].x;
			var y=knot[knot.length-3].y;
			cline(x, y, i);
			clinX=knot[knot.length-1].x;
			clinY=knot[knot.length-1].y;
			break;
	}
}

// Отрисовка линии созвездия.
function cline(x, y, i) {
	if (clinH>0 || star[i].h>0) {
		if (vmod==2) context.strokeStyle="aqua";
		if (vmod==3) context.lineWidth = 0.3;
		else context.lineWidth = 0.2;
		context.beginPath();
		context.moveTo(clinX, clinY);
		context.lineTo(x, y);
		context.stroke();
	}
	clinX=x;
	clinY=y;
}

// Расчет положения светил.
function calc() {
	jd=JD();
	var lstime=LST();
	calcPlanets(lstime);
	for (var i=0; i<star.length; i++) {
		star[i].h=ad_to_h(star[i].a, star[i].d, lstime);
		star[i].A=ad_to_A(star[i].a, star[i].d, lstime, star[i].h);
		if (star[i].h>-1 && ref==1) star[i].h+=refr(star[i].h);
	}
	for (var i=0; i<planet.length; i++) {
		planet[i].h=ad_to_h(planet[i].a, planet[i].d, lstime);
		planet[i].A=ad_to_A(planet[i].a, planet[i].d, lstime, planet[i].h);
		if (planet[i].h>-1 && ref==1) planet[i].h+=refr(planet[i].h);
	}
	draw();
}

// Расчет положения Солнца и планет.
function calcPlanets(lstime) {
	var D=jd-2451545; // J2000
	for (var i=0; i<planet.length; i++) {
		if (i==1) { // Луна
			var l=360/365.2422*D/planet[i].T+planet[i].l0;
			var M=l-0.1114041*D-planet[i].w-planet[i].O;
			var N=planet[i].O-0.0529539*D;
			// Поправки.
			var C=l-planet[0].l;
			var Ev=1.2739*Math.sin((2*C-M)*k);
			var Ae=0.1858*Math.sin(planet[0].M*k);
			var A3=0.37*Math.sin(planet[0].M*k);
			M=M+Ev-Ae-A3;
			var Ec=6.2886*Math.sin(M*k); // Уравнение центра.
			var A4=0.214*Math.sin(2*M*k);
			l=l+Ev+Ec-Ae+A4;
			var V=0.6583*Math.sin(2*(l-planet[0].l)*k);
			l=l+V;
			N=N-0.16*Math.sin(planet[0].M*k);
			var y=Math.sin((l-N)*k)*Math.cos(planet[i].i*k);
			var x=Math.cos((l-N)*k);
			l=Math.atan(y/x)/k+N;
			if (x<0) l+=180;
			planet[i].l=l;
			var sinb=Math.sin((l-N)*k)*Math.sin(planet[i].i*k);
			planet[i].b=Math.asin(sinb)/k;
			var v=M+Ec;
			var r=planet[i].a_*(1-planet[i].e*planet[i].e)/(1+planet[i].e*Math.cos(v*k));
			planet[i].r=r;
			var F=(1-Math.cos((planet[i].l-planet[0].l)*k))/2;
			planet[i].F=F;
			planet[i].m=5*Math.log(r/planet[i].R/Math.sqrt(F*planet[i].Al))/Math.log(10)-26.74;
		}
		else {
			var M=(360/365.2422*D/planet[i].T+planet[i].l0-planet[i].w)%360;
			// Решение уравнения Кеплера.
			var E=M*k;
			for (var j=0; j<5; j++) E=planet[i].e*Math.sin(E)+M*k;
			var tgv=Math.sqrt((1+planet[i].e)/(1-planet[i].e))*Math.tan(E/2);
			var v=Math.atan(tgv)/k*2;

			var l=v+planet[i].w;
			l=(l+360)%360;
			var r=planet[i].a_*(1-planet[i].e*planet[i].e)/(1+planet[i].e*Math.cos(v*k));
			planet[i].r=r;
		}
		if (i>1) {
			var L=planet[0].l+180;
			var R=planet[0].r;
			var P=Math.asin(Math.sin((l-planet[i].O)*k)*Math.sin(planet[i].i*k))/k;
			var y=Math.sin((l-planet[i].O)*k)*Math.cos(planet[i].i*k);
			var x=Math.cos((l-planet[i].O)*k);
			var l_=Math.atan(y/x)/k+planet[i].O;
			if (x<0) l_+=180;
			var r_=r*Math.cos(P*k);
			if (planet[i].a_>1) {
				var y=R*Math.sin((l_-L)*k);
				var x=r_-R*Math.cos((l_-L)*k);
				var at=Math.atan(y/x)/k;
				planet[i].l=at+l_;
			}
			else {
				var y=r_*Math.sin((L-l_)*k);
				var x=R-r_*Math.cos((L-l_)*k);
				var at=Math.atan(y/x)/k;
				planet[i].l=at+L+180;
			}
			var y=r_*Math.tan(P*k)*Math.sin((planet[i].l-l_)*k);
			var x=R*Math.sin((l_-L)*k);
			planet[i].b=Math.atan(y/x)/k;
			var p=Math.sqrt(R*R+r*r-2*R*r*Math.cos((l-L)*k));
			planet[i].p=p;
			var F=(1+Math.cos((planet[i].l-l)*k))/2;
			planet[i].F=F;
			planet[i].m=5*Math.log(r*p/planet[i].R/Math.sqrt(F*planet[i].Al))/Math.log(10)-26.74;
		}
		else if (i==0) {
			planet[0].M=M;
			planet[0].l=l;
			planet[0].b=0;
			planet[0].m=-26.74;
			planet[0].p=planet[0].r;
		}
		planet[i].a=lb_to_a(planet[i].l, planet[i].b);
		planet[i].d=lb_to_d(planet[i].l, planet[i].b);
		// Параллакс Луны. Высота местности и форма геоида не учитываются.
		if (i==1) {
			var r=planet[i].r*1496e5/6378.14;
			var H=lstime-planet[i].a;
			var rsind=r*Math.sin(planet[i].d*k);
			var rcosd=r*Math.cos(planet[i].d*k);
			var sinf=Math.sin(Lat*k);
			var cosf=Math.cos(Lat*k);
			var sinH=Math.sin(H*15*k);
			var cosH=Math.cos(H*15*k);
			var x=cosf*sinH;
			var y=rcosd-cosf*cosH;
			var z=rsind-sinf;
			var Delta=Math.atan(x/y)/k/15;
			planet[i].a-=Delta;
			planet[i].d=Math.atan(Math.cos((H+Delta)*15*k)*z/(rcosd*cosH-cosf))/k;
			planet[i].p=Math.sqrt(x*x+y*y+z*z)/1496e5*6378.14;
		}
		// Угол светлого лимба.
		if (i>0 && i<5) {
			var da=(planet[0].a-planet[i].a)*15*k;
			var d0=planet[0].d*k;
			var d=planet[i].d*k;
			var y=Math.cos(d0)*Math.sin(da);
			var x=Math.cos(d)*Math.sin(d0)-Math.sin(d)*Math.cos(d0)*Math.cos(da);
			var K=Math.atan(y/x)/k;
			if (x<0) K+=180;
			planet[i].K=K;
		}
		planet[i].q=Math.atan(planet[i].R/planet[i].p)/k;
	}
}

// Горизонт и стороны света.
function skyline() {
	if (vmod==2) {
		context.fillStyle="red";
		context.strokeStyle="red";
	}
	var carDir=["С", "30°", "60°", "В", "120°", "150°", "Ю", "210°", "240°", "З", "300°", "330°"];
	context.lineWidth = 1;
	context.textBaseline = "middle";
	context.textAlign = "center";
	for (var i=0; i<carDir.length; i++) {
		var A=az+i*30;
		context.beginPath();
		context.moveTo(hA_to_x(0, A), hA_to_y(0, A));
		context.lineTo(hA_to_x(-0.7, A), hA_to_y(-0.7, A));
		context.stroke();
		context.fillText(carDir[i], hA_to_x(-2, A), hA_to_y(-2, A));
	}
	context.beginPath();
	context.arc(canvas.width/2, yz*canvas.height, canvas.height*dh*zoom, 0, 2*Math.PI);
	if (vmod==2) {
		context.fillStyle="#080808";
		context.fill();
	}
	context.stroke();
	context.clip();
}

// Азимутальная сетка.
function grid() {
	var n=9;
	if (vmod==2) {
		context.lineWidth = 0.03;
		context.strokeStyle="white";
	}
	else if (vmod==3) context.lineWidth = 0.1;
	else context.lineWidth = 0.05;
	for (i=1; i<n; i++) {
		context.beginPath();
		var R=canvas.height*dh*zoom;
		var f=i*10*k;
		context.arc(canvas.width/2, yz*canvas.height, R*Math.tan(f/2), 0, 2*Math.PI);
		context.stroke();
	}
	for (i=-n; i<n; i++) {
		context.beginPath();
		context.moveTo(hA_to_x(0, az+i*90/n), hA_to_y(0, az+i*90/n));
		context.lineTo(hA_to_x(0, az+i*90/n+180), hA_to_y(0, az+i*90/n+180));
		context.stroke();
	}
}

// Учет прецессии
function precession() {
	var N = (jd-2451545)/365.25/3600;
	for (var i=0; i<star.length; i++ ) {
		star[i].a = star[i].a0 + (3.0742+1.33589*Math.sin(15*k*star[i].a0)*Math.tan(k*star[i].d0))*N;
		star[i].d = star[i].d0 + 20.0383*Math.cos(15*k*star[i].a0)*N;
	}
}

// Юлианский день
function JD() {
	return 2440587.5+Date.now()/864e5;
}

// Количество дней с начала года.
function numDay() {
	var ms = (jd-2440587.5)*864e5;
	var today = new Date(ms);
	var start = Date.UTC(today.getFullYear(), 0, 0);
	return (today.getTime()-start)/864e5;
}

// Постоянная нутации.
function nutB() {
	var ms = (jd-2440587.5)*864e5;
	var today = new Date(ms);
	var msUTC=Date.UTC(today.getFullYear(), 0, 0);
	var jdUTC=2440587.5+msUTC/864e5;
	var T=(jdUTC-2415020)/36525;
	var R=6.6460656+2400.051262*T+0.00002581*T*T;
	return 24*(today.getFullYear()-1899)-R;
}

// Наклон эклиптики к экватору, в градусах.
function ec() {
	var T=(jd-2415020)/36525;
	var de=46.845*T+0.0059*T*T-0.001811*T*T*T;
	return 23.452294-de/3600;
}

// Учет атмосферной рефракции.
function refr(h) {
	return 1.02/Math.tan((h+10.3/(h+5.11))*Math.PI/180)/60;
}

// Среднее время по Гринвичу, в часах.
function GMT() {
	return 24*(jd-0.5-Math.floor(jd-0.5));
}

// Местное звездное время, в часах.
function LST() {
	var lst=Math.floor(numDay())*0.0657098-nutB()+GMT()*1.002738+Long/15;
	return lst-24*((lst/24)|0);
}

// Преобразование минут и секунд в десятичный формат.
function hms_to_h(hms) {
	var h=(hms/10000)|0;
	var m=(+(hms/10000-h).toFixed(10)*100)|0;
	var s=(hms/100-((hms/100)|0))*100;
	return h+m/60+s/3600;
}

// Функции перевода азимутальной проекции на холст.
function hA_to_x(h, A) {
	var r=canvas.height*dh*zoom*Math.tan((45-h/2)*k);
	return canvas.width/2+r*Math.sin(A*k);
}

function hA_to_y(h, A) {
	var r=canvas.height*dh*zoom*Math.tan((45-h/2)*k);
	return r*Math.cos(A*k)+yz*canvas.height;
}

// Функции перехода от экваториальных координат к горизонтальным.
function ad_to_h(a, d, lst) {
	var sinh=Math.sin(d*k)*Math.sin(Lat*k)+Math.cos(d*k)*Math.cos(Lat*k)*Math.cos(15*k*(lst-a));
	return Math.asin(sinh)/k;
}

function ad_to_A(a, d, lst, h) {
	var cosA=(Math.sin(d*k)-Math.sin(h*k)*Math.sin(Lat*k))/Math.cos(h*k)/Math.cos(Lat*k);
	var A=Math.acos(cosA)/k;
	if (Math.sin(15*k*(lst-a))<0) return A;
	else return 360-A;
}

// Функции перехода от эклиптических координатат к экваториальным.
function lb_to_a(l, b) {
	var y=Math.sin(l*k)*Math.cos(E*k)-Math.tan(b*k)*Math.sin(E*k);
	var x=Math.cos(l*k);
	var a=Math.atan(y/x)/k;
	if (x<0) a+=180;
	return a/15;
}

function lb_to_d(l, b) {
	var sinD=Math.sin(b*k)*Math.cos(E*k)+Math.cos(b*k)*Math.sin(E*k)*Math.sin(l*k);
	return Math.asin(sinD)/k
}

// Цвет звезд.
function starsColor(color) {
	switch (color) {
		case "O": return "#9aafff";
		case "B": return "#cad7ff";
		case "A": return "#f8f7ff";
		case "F": return "#fff4ea";
		case "G": return "#fff2a1";
		case "K": return "#ffc46f";
		case "M": return "#ff6060";
	}
}

</script>

<!-- Окно справки -->
<div id="helpWin" class="modalwin">
	<h2> Справка по управляющим клавишам. </h2><br>
	←/→ - поворот неба по/против часовой стрелки, <br>
	↑/↓ - обзор неба по вертикали, <br>
	WASD - быстрая навигация по сторонам света, <br>
	Pg Up/Pg Dn - увеличение/уменьшение, <br>
	C - ввести свои координаты, <br>
	X - получить координаты из браузера, <br>
	L - вкл/выкл линии созвездий, <br>
	H - вкл/выкл азимутальную сетку, <br>
	P - вкл/выкл Солнце и планеты, <br>
	B - переключить отображение названий планет, <br>
	N - переключить отображение названий созвездий, <br>
	M - переключить отображение названий звезд, <br>
	R - вкл/выкл учет атмосферной рефракции, <br>
	V - сменить визуальный режим.
</div>

</body>
</html>